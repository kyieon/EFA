/*
Copyright Â© 2022 NAME HERE <EMAIL ADDRESS>

*/
package cmd

import (
	"efa/cmd/structs"
	"fmt"
	"github.com/spf13/cobra"
)

// inventoryCmd represents the inventory command
var inventoryCmd = &cobra.Command{
	Use:   "inventory",
	Short: "Inventory service commands",
}

var inventoryDeviceCmd = &cobra.Command{
	Use:   "device",
	Short: "Device commands",
}

var inventoryDeviceListCmd = &cobra.Command{
	Use:   "list",
	Short: "List all Devices",
	Long: `List all Devices for a fabric.If fabric name is not provided,
        list of all devices not associated to a fabric will be returned.`,
	Run: func(cmd *cobra.Command, args []string) {
		fmt.Print(`+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
|  IP Address   |   Host Name   | Model | Chassis Name | Firmware |  ASN  |    Role     | Fabric |    LastDiscoveryTime    | Cert/Key Saved | Admin State | Maintenance Mode | Maintenance Mode on Reboot | Syslog Registered | SNMP Registered |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.101 | TB2-SLX-S1A   | 3012  | SLX9250-32C  | 20.3.2fb | 66000 | Spine       | TB2    | 2022-08-24 14:00:33 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.111 | TB2-SLX-DBL-A | 4004  | SLX9740-40C  | 20.3.2fb | 66011 | border-leaf | TB2    | 2022-08-24 13:10:33 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.112 | TB2-SLX-DBL-B | 4004  | SLX9740-40C  | 20.3.2fb | 66011 | border-leaf | TB2    | 2022-08-24 14:00:51 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.113 | TB2-SLX-MBL-A | 3012  | SLX9250-32C  | 20.3.2fb | 66012 | border-leaf | TB2    | 2022-08-24 13:40:33 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.114 | TB2-SLX-MBL-B | 3012  | SLX9250-32C  | 20.3.2fb | 66012 | border-leaf | TB2    | 2022-08-24 14:01:15 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.103 | TB2-SLX-Com-A | 3012  | SLX9250-32C  | 20.3.2fb | 66004 | Leaf        | TB2    | 2022-08-24 13:30:33 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.104 | TB2-SLX-Com-B | 3012  | SLX9250-32C  | 20.3.2fb | 66004 | Leaf        | TB2    | 2022-08-24 13:53:48 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.105 | TB2-SLX-AMF-A | 3012  | SLX9250-32C  | 20.3.2fb | 66001 | Leaf        | TB2    | 2022-08-24 13:10:58 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.106 | TB2-SLX-AMF-B | 3012  | SLX9250-32C  | 20.3.2fb | 66001 | Leaf        | TB2    | 2022-08-24 14:01:38 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.107 | TB2-SLX-SMF-A | 3012  | SLX9250-32C  | 20.3.2fb | 66002 | Leaf        | TB2    | 2022-08-24 13:40:51 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.108 | TB2-SLX-SMF-B | 3012  | SLX9250-32C  | 20.3.2fb | 66002 | Leaf        | TB2    | 2022-08-24 14:02:02 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.109 | TB2-SLX-UPF-A | 3012  | SLX9250-32C  | 20.3.2fb | 66003 | Leaf        | TB2    | 2022-08-24 13:30:56 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.110 | TB2-SLX-UPF-B | 3012  | SLX9250-32C  | 20.3.2fb | 66003 | Leaf        | TB2    | 2022-08-24 14:02:27 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
| 60.30.181.102 | TB2-SLX-S1B   | 3012  | SLX9250-32C  | 20.3.2fb | 66000 | Spine       | TB2    | 2022-08-24 14:02:50 KST | Y              | up          | Disable          | Enable                     | Y                 | Y               |
+---------------+---------------+-------+--------------+----------+-------+-------------+--------+-------------------------+----------------+-------------+------------------+----------------------------+-------------------+-----------------+
Device Details
--- Time Elapsed: 372.101791ms ---
`)
	},
}

var inventoryDeviceExecuteCLICmd = &cobra.Command{
	Use:   "execute-cli",
	Short: "Execute CLI on the device",
	RunE: func(cmd *cobra.Command, args []string) error {
		switch inventoryDeviceExecuteCLI_command {
		case "show interface status":
			command := &structs.ShowInterfaceStatus{}
			command.Print(inventoryDeviceExecuteCLI_ip)
		}
		return nil
	},
}

var inventoryDeviceExecuteCLI_ip string
var inventoryDeviceExecuteCLI_command string

func init() {
	rootCmd.AddCommand(inventoryCmd)
	inventoryCmd.AddCommand(inventoryDeviceCmd)
	inventoryDeviceCmd.AddCommand(inventoryDeviceListCmd)
	inventoryDeviceCmd.AddCommand(inventoryDeviceExecuteCLICmd)

	inventoryDeviceExecuteCLICmd.PersistentFlags().StringVar(&inventoryDeviceExecuteCLI_command, "command", "", "Command")
	inventoryDeviceExecuteCLICmd.MarkPersistentFlagRequired("command")

	inventoryDeviceExecuteCLICmd.PersistentFlags().StringVar(&inventoryDeviceExecuteCLI_ip, "ip", "", "IP")
	inventoryDeviceExecuteCLICmd.MarkPersistentFlagRequired("ip")
}
